---
title: "Analysis of seabird sightings"
output: html_notebook
---

```{r}
bird_counts <- read_csv("clean_data/bird_counts_raw.csv") # to check "before cleaning" answers
bird_counts_clean <- read_csv("clean_data/bird_counts_cleaned.csv")

glimpse(bird_counts_clean)
```

## Most individual sightings

_Task: Which bird had the most individual sightings? Give the bird’s common name, scientific name and species abbreviation._

Look for most frequent bird, where count = 1.

```{r}
# using data before cleaning
bird_counts %>% 
  filter(count == 1) %>%  # 20,357 individual sightings
  group_by(common_name) %>% 
  summarise(lone_sightings = n()) %>% 
  arrange(desc(lone_sightings)) # 298 rows
```

Without recoding / cleaning bird names, there are 298 rows in the summary table when grouping by common_name, some of which are the same bird with different elements in their common name (such as plummage, age). When grouping by species_abbreviation, there are 297 (also contain plummage and age in the column), so this does not improve matters.

So, I do need to clean up these names to get a true total count per bird.

```{r}
# after cleaning common_name column:
bird_counts_clean %>% 
  filter(count == 1) %>%  # 20,357 individual sightings
  group_by(common_name, sci_name, species_abbreviation) %>% 
  summarise(lone_sightings = n()) %>% 
  arrange(desc(lone_sightings)) 
```
If group by common_name only, now 151 rows, some with common_names including various different possible birds (separated by / , e.g. "Shy / white-capped / Salvin's / Chatham mollymawk"). 

However, **Wandering albatross (Diomedea antipodensis / exulans; DIOANTEXU) has the most individual sightings** by far, so I assume that this answer won't change even if I try to deal with the not-quite-specified birds.

## Highest total count of sightings

_Task: Which bird had the highest total count? Give the bird’s common name, scientific name and species abbreviation._

```{r}
bird_counts_clean %>% 
  group_by(common_name, sci_name, species_abbreviation) %>% 
  summarise(total_sightings = sum(count)) %>% 
  arrange(desc(total_sightings)) 
```
The **Black-billed gull (Larus bulleri; LARBUL)** has the highest total count of sightings (**7732** birds counted).

## Birds sighted alone

_Task: How many different types of birds were only ever seen in groups of 1?_

```{r}
distinct_lone_bird_types_cn <- bird_counts_clean %>% 
  filter(count == 1) %>% 
  select(common_name) %>% 
  distinct()

distinct_lone_bird_types_sn <- bird_counts_clean %>% 
  filter(count == 1) %>% 
  select(sci_name) %>% 
  distinct()

distinct_lone_bird_types_sa <- bird_counts_clean %>% 
  filter(count == 1) %>% 
  select(species_abbreviation) %>% 
  distinct()

nrow(distinct_lone_bird_types_cn)
nrow(distinct_lone_bird_types_sn)
nrow(distinct_lone_bird_types_sa)
```

Depending on how you determine "bird type", there are **about 150 different bird types** that were spotted alone. Specifically, by "common name", 150; by "scientific name", 142; and by "species_abbreviation", 149.

_These differences may be an artefact from dirty data or a cleaning step - perhaps these should all be the same number._

## Penguin sightings

_Task: How many penguins were seen? (Hint: there are many types of penguin)_

```{r}
# find all the types of penguins, regardless of sightings
penguins <- bird_counts_clean %>% 
  filter(str_detect(bird_counts_clean$common_name, "(?i)[P]enguin") == TRUE) %>% 
  distinct(common_name)
penguins

# find all the penguins in the dataset, remove the NAs in count to ensure sums count all sightings
penguin_sightings <- bird_counts_clean %>% 
  filter(str_detect(bird_counts_clean$common_name, "(?i)[P]enguin") == TRUE) %>% 
  group_by(common_name) %>% 
  summarise(total_sightings = sum(count, na.rm = TRUE)) %>% 
  arrange(desc(total_sightings))
penguin_sightings

# count the number of types of penguins that were sighted
nrow(penguin_sightings) # all 7 types were sighted

# sum the sightings of all the penguins to find total sightings
penguin_sightings %>% 
  summarise(total_sightings = sum(total_sightings, na.rm = TRUE))
```

There were **158 penguins, of 7 different types** sighted overall.
